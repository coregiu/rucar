## 整体设计

![](class_design.png)

整体代码分五个模块，一个接口结构体和一个main函数。

controller：代表MCU 51，作中心控制，接收PS2数据，并把数据转换成命令通知给各驱动模块干活。

ps2_receiver： PS2接收模块，接收PS2传过来的数据，并转换成内部命令。

module_command_receiver： 工作模块接口，定义内部命令，抽象模块初始化和命令执行接口。

led_group： LED灯组模块，接收主控中灯光变换指令，根据PS2传递的指令按顺序变换灯光效果。

music_switch： 音乐驱动模块，接收主控中音乐相关指令，可控制音乐播放和下一首歌切换。

motor_driver： 电机驱动模块，接收主控中电机相关指令，控制底盘前进、后退、左转和右转。